<!doctype HTML>
<meta charset = 'utf-8'>
<html>
  <head>
    <link rel='stylesheet' href='assets/css/sankey.css'>
    
    <script src='assets/js/d3.v3.js' type='text/javascript'></script>
    <script src='assets/js/sankey.js' type='text/javascript'></script>
    
    <style>
    .rChart {
      display: block;
      margin-left: auto; 
      margin-right: auto;
      width: 960px;
      height: 800px;
    }  
    </style>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Figures on Fee-based Open Access Publishing in Germany ">
    <meta name="author" content="Najko Jahn">
    <script src="http://use.edgefonts.net/source-code-pro.js"></script>
    <script src="http://use.edgefonts.net/quattrocento-sans.js"></script>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <script href="assets/js/bootstrap.js"></script>
    <script href="assets/js/bootstrap-button.js"></script>
    <script href="assets/js/bootstrap-collapse.js"></script>
    <script href="assets/jquery.js"></script>
    <link rel="stylesheet" href="assets/styles/github.css">
    <script src="assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css"></link>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
</script>
  </head>
  <body>
      <div class="span11 offset1">

     <div class="row">
      <div class=".col-md-12">
       <h1>Datasets on fee-based Open Access publishing</h1>

        <p>For bugs, feature requests and other issues, please submit an <a href="https://github.com/njahn82/unibiAPC/issues">issue via Github</a>.</p>

          <p>For general comments, email najko.jahn at uni-bielefeld.de  and dirk.pieper at uni-bielefeld.de .</p>

      <p><a href="https://github.com/njahn82/unibiAPC"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a></p>

      <hr class="soften">

<h2>Dataset Fees paid by German Research Research Institutions</h2>

 <p>The dataset provides disambiguated data elements for monitoring APC expenditure across institutions per article, in particular:</p>
 <ul>
  <li>Fee paid (including VAT)</li>
  <li>Publication identifiers - DOI, PubMedID, PubMedCentral ID, Web of Science UT</li>
  <li>Disambiguated publisher names and journal titles provided by CrossRef</li>
  <li>Repository Identifier of participating universities.</li>
  <li>ISSN</li>
</ul>

  <a href="https://github.com/njahn82/unibiAPC/blob/master/data/apc_de.csv" class="btn btn-info btn-lg" role="button">View on GitHub</a>

<h3>University Publication Funds in Germany</h3>
<p>Dataset on funds that are supported by the German Research Foundation (DFG) under its <a href="http://www.dfg.de/en/research_funding/programmes/infrastructure/lis/funding_opportunities/open_access_publishing/index.html">Open-Access Publishing Programme.</a></p>
<p>Participating Funds:</p>
  <ul>
    <li><a href="http://oa.uni-bielefeld.de/publikationsfonds.html">Bielefeld University</a></li>
    <li><a href="http://tib.uni-hannover.de/oafonds">Leibniz Universität Hannover</a></li>
     <li><a href="http://www.bibliothek.kit.edu/cms/kit-publikationsfonds.php">KIT Karlsruhe</a></li>
    <li><a href="https://www.uni-due.de/ub/open_access.shtml">University of Duisburg-Essen</a></li>
    <li><a href="http://www.ub.uni-konstanz.de/openaccess/open-access-publikationsfonds-der-universitaet-konstanz/">University of Konstanz</a></li>
    <li><a href="http://oa.uni-regensburg.de/">University of Regensburg</a></li>
  </ul>

<h3>Participating Research Society Funds in Germany</h3>

Dataset on funds that are supported by research societies under its Open-Access Publishing Programme.

Participating Research Organizations:

<ul>
  <li><a href="http://www.mpdl.mpg.de/21-specials/50-open-access-publishing.html">Max Planck Digital Library</a>
  </li>
</ul>

Please note, MPDL data content covers APCs as paid for by our central budget for the Max Planck Society.  APCs funded locally by Max Planck Institutes are not part of this data set.  The Max Planck Society has a limited input tax reduction. The refund of input VAT for APC is 20%.


<h3>Information on APC (journal level)</h3>
  <ul>
    <li><a href="https://github.com/njahn82/unibiAPC/pull/1">Information on APCs (sociology)</a></li>
  </ul>
<a href="https://github.com/njahn82/unibiAPC/blob/master/data/journalsociology/soc_apcs.csv" class="btn btn-info btn-lg" role="button">View on GitHub</a>

<h2>Sample visualisations</h2>

<ul>
    <li>
    <a href="#unik">Fees paid by German Research Research Institutions</a>
  </li>
  <li>
    <a href="#unide">Comparing Bielefeld and Regensburg fees paid 2012 &mdash; 13</a>
   <li>
    <a href="#unidue">Fees paid by Open-Access-Fonds University of Duisburg-Essen 2013</a>
  </li>
    <li>
    <a href="#unih">Fees paid by Leibniz Universität Hannover Publication Fund since 2013</a>
  </li>
  <li>
    <a href="#unireg">Fees paid by University of Regensburg Publication Fund 2012 &mdash; 13</a>
  </li>
   <li>
    <a href="#unireg">Fees paid by Bielefeld University Publication Fund 2012 &mdash; 13</a>
  </li>
</ul>

<h3 id="unik">Author fees paid by German Research Institutions</h3>

<div id = 'chart7ea21bad7c1' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart7ea21bad7c1",
"width":    760,
"height":    600,
"data": {
 "source": [ "Konstanz U", "Duisburg-Essen U", "KIT", "Bielefeld U", "MPG", "Duisburg-Essen U", "Bielefeld U", "Regensburg U", "Regensburg U", "Regensburg U", "Bielefeld U", "Konstanz U", "Hannover U", "KIT", "Regensburg U", "Bielefeld U", "MPG", "Konstanz U", "KIT", "Regensburg U", "Bielefeld U", "Duisburg-Essen U", "Hannover U", "KIT", "Konstanz U", "Regensburg U", "Konstanz U", "Bielefeld U", "Duisburg-Essen U", "KIT", "Konstanz U", "Regensburg U", "KIT", "Bielefeld U", "Duisburg-Essen U", "KIT", "KIT", "Konstanz U", "Regensburg U", "Duisburg-Essen U", "Regensburg U", "KIT", "Regensburg U", "Bielefeld U", "Duisburg-Essen U", "Hannover U", "KIT", "Konstanz U", "MPG", "Regensburg U", "Regensburg U", "Duisburg-Essen U", "KIT", "Bielefeld U", "Duisburg-Essen U", "Hannover U", "KIT", "Regensburg U", "Regensburg U", "Bielefeld U", "Duisburg-Essen U", "KIT", "Konstanz U", "Regensburg U", "KIT", "Regensburg U", "Hannover U", "KIT", "Konstanz U", "Duisburg-Essen U", "KIT", "Konstanz U", "Regensburg U", "Regensburg U", "Konstanz U", "Regensburg U", "Hannover U", "Bielefeld U", "Duisburg-Essen U", "Hannover U", "KIT", "Konstanz U", "MPG", "Regensburg U", "Hannover U", "Duisburg-Essen U", "Bielefeld U", "Hannover U", "KIT", "Konstanz U", "Regensburg U", "Regensburg U", "Bielefeld U", "Duisburg-Essen U", "Hannover U", "KIT", "Konstanz U", "MPG", "Regensburg U", "Regensburg U", "Konstanz U", "Duisburg-Essen U", "MPG", "Duisburg-Essen U", "Regensburg U", "Bielefeld U", "Duisburg-Essen U", "KIT", "MPG", "Regensburg U" ],
"target": [ "Academy and Industry Research Collaboration Center (AIRCC)", "AIP Publishing", "AIP Publishing", "American Physical Society (APS)", "American Vacuum Society", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "Co-Action Publishing", "Co-Action Publishing", "Copernicus GmbH", "Copernicus GmbH", "e-Century Publ. Corp.", "Elsevier BV", "EMBO", "Environmental Health Perspectives", "ESG", "Food Science Publisher", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Genetics Society of America", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "IGIP", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "InTech", "InTech", "International Scientific Literature", "International Scientific Literature", "International Union of Crystallography (IUCr)", "International Union of Crystallography (IUCr)", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "KIT Scientific Publishing", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Medknow", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "Nature Publishing Group", "OMICS Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Pensoft Publishers", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "The Genomic Standards Consortium", "Thieme Publishing Group", "Ubiquity Press, Ltd.", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell" ],
"value": [ 136.57,   1206, 1057.9,   1087, 737.28,    238, 5507.2, 2195.2,   1111, 481.88, 1404.2,  928.2, 3387.6,  54308, 1506.3, 1728.1, 1337.2, 1314.5,   1000,  192.8,  45068,   3246, 7996.8, 9301.3,  18517,  25489, 1803.7,   1928,   2851, 7898.9, 2445.4, 3353.2,    120,   1017,   1283, 2400.5,   1180, 1523.2,    640,    385, 1381.9, 148.46, 304.93, 2356.2,   1598, 4990.9, 6792.5, 1178.1,  61482,   1898,  684.1,   1118,    690, 4504.3,   2878, 4482.9, 2614.6,   6000, 318.01, 2290.7,   2235,   7472, 1244.7, 1244.7, 2038.2, 2807.4,   7192,  67270, 9367.1,   1982, 2534.7, 2451.4, 9549.8,    119,  523.6,    357,    930,  31443,  32880, 3678.5,  26665,  30118, 2.7549e+05,  51825,   1568,    243,    732,  533.8, 1393.7, 770.78, 383.11,    833,  62375,  65934, 6788.9,  32762,  34955, 5.3274e+05,  63064, 1239.5, 499.13,    762, 2178.7,    909,  285.6,   4247,    827,    979,  11760, 5344.7 ] 
},
"nodeWidth":     20,
"nodePadding":      8,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by German Research Institutions",
"id": "chart7ea21bad7c1" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>


<h3 id="unide">Comparing Bielefeld and Regensburg fees paid 2012 &mdash; 13</h3>

<div id = 'chart8a715b175a7' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart8a715b175a7",
"width":    960,
"height":    600,
"data": {
 "source": [ "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Bielefeld", "Uni Regensburg" ],
"target": [ "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "e-Century Publ. Corp.", "Elsevier BV", "Food Science Publisher", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Informa UK Limited", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "MDPI AG", "MDPI AG", "Medknow", "Nature Publishing Group", "Nature Publishing Group", "OMICS Publishing Group", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Wiley-Blackwell" ],
"value": [   3722, 2195.2,   1111, 481.88, 1506.3,    142,  192.8,  27409,  25489,   1928, 3353.2,   1017,    640, 1381.9, 304.93,   1898,  684.1,   3151,   6000, 318.01,   1046, 1244.7, 2807.4, 9549.8,    119,    357,  23271,  51825,    732, 383.11,    833,  42902,  63064, 1239.5,  285.6,   4247, 5344.7 ] 
},
"nodeWidth":     20,
"nodePadding":      8,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Bielefeld University and University of Regensburg Publication Fund 2012-13",
"id": "chart8a715b175a7" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>


<h3 id="unidue">Fees paid by Open-Access-Fonds University of Duisburg-Essen 2013</h3>

<div id = 'chart17c573ae8a9c' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart17c573ae8a9c",
"width":    960,
"height":    800,
"data": {
 "value": [   1206, null,    238, null, null, null, null, null, null, null, null,   3246,   2851, null,   1283, null,    385, null,   1598, null,   1118,   2878, null,   2235, null, null,   1982, null, null, null,  32880, null,    243, null, null,  65934, null,    762,    909, null,    827,    990,   1157,    540,   1000,   1000,   1236,   1216,   1216,   1196,   1212,   1236,   1296,   1256,   1296,   1296,   1296,   1064,   1068,   1140,   1316,   1308,   1252,   1244,   1268,   1056,   1044,   1096,   1080,   1032,   1188,   1180,   1180,   1180,    680,   1104,   1152,    924,    680,   1212,    385,   1377,   1377,   1377,   1377,   1377,   1377,   1377,   1377,   1016,   1737,   1634,   1657,   1143,    243,    909,    827,    990,   1245,    762,   1206,    608,   1982,   1283,    559,   1135,   1064,   1064,   1212,   1272,   1212,   1200,   1212,   1200,   1216,   1216,   1686,   1408,    584,   1124,   1160,   1392,    696,    696,   1212,   1128,   1240,    994,    999,    981,   1210,   1192,   1192,   1201,   1195,   1189,    981,   1211,   1212,   1238,   1025,   1118,    960,   1143,   1323,   1555,    238 ],
"target": [ "AIP Publishing", "American Physical Society (APS)", "Amsterdam University Press", "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "Co-Action Publishing", "Copernicus GmbH", "e-Century Publ. Corp.", "Elsevier BV", "Food Science Publisher", "Frontiers Media SA", "Hindawi Publishing Corporation", "Informa UK Limited", "Institute of Electrical & Electronics Engineers (IEEE)", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "JMIR Publications Inc.", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Optical Society of America (OSA)", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Schweizerbart", "Sciedu Press", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Thieme Publishing Group", "Univ. of Buckingham Pr.", "Walter de Gruyter GmbH", "Wiley-Blackwell", "New J. Phys.", "Disease Markers", "Journal of Inequalities and Applications", "J Headache Pain", "J Headache Pain", "BMC Gastroenterology", "BMC Neurology", "BMC Neurology", "BMC Cancer", "BMC Ophthalmol", "BMC Psychiatry", "BMC Complement Altern Med", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "World Journal of Surgical Oncology", "Retrovirology", "Retrovirology", "Retrovirology", "Front Zool", "Front Zool", "Virol J", "Virol J", "Behav Brain Funct", "Diagnostic Pathology", "Radiat Oncol", "Radiat Oncol", "Radiat Oncol", "Radiat Oncol", "Orphanet J Rare Dis", "Orphanet J Rare Dis", "Orphanet J Rare Dis", "Orphanet J Rare Dis", "BMC Research Notes", "Parasites & Vectors", "Parasites & Vectors", "EJNMMI Res", "SpringerPlus", "Critical Care", "Annals of Transplantation", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Pathogens", "PLoS Pathogens", "PLoS Pathogens", "Frontiers in Oncology", "International Journal of Financial Research", "Hypothesis in the Life Sciences ", "New Microbe New Infect", "Mod Pathol", "Scientific Reports", "Am J Perinatol Rep", "AIP Advances", "New J. Phys.", "Nucleic Acids Research", "IEEE Access", "Mediators of Inflammation", "Journal of Immunology Research", "J Headache Pain", "J Headache Pain", "BMC Gastroenterology", "BMC Pediatrics", "BMC Psychiatry", "BMC Musculoskeletal Disorders", "BMC Complement Altern Med", "Molecular Cancer", "World Journal of Surgical Oncology", "Virol J", "Radiat Oncol", "Orphanet J Rare Dis", "J Med Case Rep", "BioData Mining", "Parasites & Vectors", "Eur J Med Res", "SpringerPlus", "SpringerPlus", "Critical Care", "Journal of Cheminformatics", "Stem Cell Res Ther", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "J Med Internet Res", "Frontiers in Oncology", "Frontiers in Oncology", "IJMS", "IJMS", "Taal en tongval" ],
"source": [ "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "Universität Duisburg-Essen", "IOP Publishing", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "International Scientific Literature", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Sciedu Press", "Univ. of Buckingham Pr.", "Wiley-Blackwell", "Nature Publishing Group", "Nature Publishing Group", "Thieme Publishing Group", "AIP Publishing", "IOP Publishing", "Oxford University Press (OUP)", "Institute of Electrical & Electronics Engineers (IEEE)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "JMIR Publications Inc.", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "Amsterdam University Press" ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Leibniz Universität Hannover Publication Fund since 2013",
"id": "chart17c573ae8a9c" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unih">Fees paid by Leibniz Universität Hannover Publication Fund  since 2013</h3>

<div id = 'chart176d351d1ac' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart176d351d1ac",
"width":    960,
"height":    600,
"data": {
 "value": [ 3387.6, 6473.6, 4990.9, 4476.4, 7174.1,    930, 2454.7,   1568,  533.8, 6788.9,    930, 1178.1, 1178.1, 1178.1, 1456.6,   1568, 1874.2,   1904, 1993.2, 1017.5, 1191.4, 1361.2, 1616.7, 1638.5, 1366.3,   1241, 1213.7, 1142.4, 1142.4, 1142.4, 1142.4,   1904, 1758.6, 779.97, 779.89,   1158,  533.8,  999.6, 828.24, 756.84, 802.93 ],
"target": [ "Copernicus GmbH", "Frontiers Media SA", "IOP Publishing", "MDPI AG", "Optical Society of America (OSA)", "Portland Press Ltd.", "Public Library of Science (PLoS)", "Schweizerbart", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Biosci. Rep.", "New J. Phys.", "New J. Phys.", "New J. Phys.", "New J. Phys.", "Meteorologische Zeitschrift", "BMC Evol Biol", "BMC Genomics", "BMC Health Services Research", "Health Econ Rev", "Biomed. Opt. Express", "Opt. Express", "Opt. Express", "Opt. Express", "Opt. Express", "PLoS ONE", "PLoS ONE", "Front. Plant Sci.", "Front. Plant Sci.", "Front. Plant Sci.", "Front. Plant Sci.", "Front. Plant Sci.", "Sensors", "Sustainability", "Sustainability", "Viruses", "IJG", "Atmos. Meas. Tech. Discuss.", "Atmos. Meas. Tech. Discuss.", "Natural Hazards and Earth System Sciences Discussions", "Natural Hazards and Earth System Sciences Discussions" ],
"source": [ "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Leibniz Universität Hannover", "Portland Press Ltd.", "IOP Publishing", "IOP Publishing", "IOP Publishing", "IOP Publishing", "Schweizerbart", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Optical Society of America (OSA)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Scientific Research Publishing, Inc,", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH", "Copernicus GmbH" ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Leibniz Universität Hannover Publication Fund since 2013",
"id": "chart176d351d1ac" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unireg">Fees paid by University of Regensburg Publication Fund 2012 &mdash; 13</h3>

  <div id = 'chart7c63c3ed967' class = 'rChart rCharts_d3_sankey'></div>
<!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart7c63c3ed967",
"width":    960,
"height":    800,
"data": {
 "value": [ 2283.1,   1111,   2176, 1506.3, 1239.5,  192.8,  24810, 3595.9, 1142.4, 1682.6, 304.93, 1404.2,    890, 5052.2,  684.1, 1244.7, 2807.4, 5690.6, 1963.5, 1802.8,  50419, 1197.3,    833,  63001, 1173.1,  285.6, 4116.5,   2000,   2000, 1244.7, 719.95, 1963.5, 1981.3, 152.61, 152.32, 766.22, 771.01,   1100,   1056,   1076,   1076,   1224,   1216,   1192,   1160,   1096,   1236,   1200,   1056,    948,   1060,   1080,    516,    572,   1000,   1028,   1292,   1180,   1364,   1388,   1368,   1188, 756.59, 1797.1, 1023.7, 1022.3, 1028.3, 1019.4, 1079.6, 1079.6, 1079.6, 1095.4, 1088.6, 1106.2, 1077.8, 1075.3, 1031.8, 956.24,  943.4, 944.57, 1046.6,  285.6,  583.1,    575,   1071, 1142.4, 1142.4,   1904,   1904, 1142.4, 1028.2, 1142.4, 1142.4,   2380, 973.34, 1635.4,   1111,    119, 2084.2, 723.28, 1099.5, 1344.7, 1178.1, 1802.8, 1267.3, 1267.3, 1267.3,    890,    926, 1178.1, 1017.1,   1296,   1220,   1232, 1844.5,   1228,   1296,   1236,   1196,   1200,   1256,   1240,   1244,    840,   1120,   1096,   1048,   1080,   1316,   1124,   1132,    624,   1056,   1480,   1380,   1228,   1236,   1228,   1296,   1620, 625.32, 2074.6, 2010.9, 941.93, 1240.2, 1232.9, 1119.2, 1252.8, 1226.8, 1238.3, 1120.8, 1236.4, 1191.1, 1236.5,   1204, 1206.5, 1206.7, 1206.7, 1093.2, 1206.7, 1069.8, 1197.3, 1197.3, 1173.1, 1173.1, 1173.1, 1239.5,    833,   1904, 1523.2,    960, 1142.4, 1142.4, 684.25, 1142.4,  916.3,  916.3,   1368, 1538.8, 484.41,    357, 318.01, 383.11, 244.24, 237.64,    640,  684.1, 745.25,  192.8, 761.05 ],
"target": [ "Association for Research in Vision and Ophthalmology (ARVO)", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Canadian Center of Science and Education", "e-Century Publ. Corp.", "Elsevier BV", "Food Science Publisher", "Frontiers Media SA", "Hindawi Publishing Corporation", "InTech", "International Scientific Literature", "International Union of Crystallography (IUCr)", "IOP Publishing", "Ivyspring International Publisher", "MDPI AG", "Medknow", "Nature Publishing Group", "OMICS Publishing Group", "Oxford University Press (OUP)", "PAGEPress Publications", "Pensoft Publishers", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Society for Publication of Acta Dermato-Venereologica ", "Springer Science + Business Media", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Walter de Gruyter GmbH", "Wiley-Blackwell", "Radiat Oncol", "ChemistryOpen", "Scientific Reports", "New J. Phys.", "Clinics and Practice", "Nucleic Acids Research", "Acta Cryst E Struct Rep Online", "Acta Cryst E Struct Rep Online", "Computational Intelligence and Neuroscience", "Journal of Ophthalmology", "BMC Bioinformatics", "BMC Neurosci", "BMC Cardiovascular Disorders", "BMC Musculoskeletal Disorders", "BMC Ear, Nose and Throat Disorders", "BMC Complement Altern Med", "BMC Clin Pathol", "Cardiovasc Diabetol", "Cardiovasc Diabetol", "Health and Quality of Life Outcomes", "Health and Quality of Life Outcomes", "Trials", "Radiat Oncol", "Journal of Vision", "Radiat Oncol", "J Med Case Rep", "J Med Case Rep", "Clin Transl Med", "Experimental & Translational Stroke Medicine", "Biol sex dif", "BMC Biophysics", "Transplant Res", "Transplant Res", "Transplant Res", "Arthritis Research & Therapy", "Medical Science Monitor", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Neglected Tropical Diseases", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "ChemistryOpen", "PLoS ONE", "PLoS ONE", "Zeitschrift für Kristallographie - New Crystal Structures", "Front. Microbio.", "Front. Hum. Neurosci.", "Frontiers in Systems Neuroscience", "Frontiers in Systems Neuroscience", "Frontiers in Systems Neuroscience", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychology", "Front. Psychiatry", "Materials", "Sensors", "WJG", "PLoS ONE", "J Neurol Neurophysiol", "Journal of Physical Chemistry & Biophysics", "PLoS ONE", "Frontiers in Cellular and Infection Microbiology", "IJMS", "ZOOKEYS", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Theranostics", "American Journal of Case Reports", "BMC Biotechnology", "BMC Cancer", "Arthritis Research & Therapy", "Health and Quality of Life Outcomes", "Critical Care", "Radiat Oncol", "Cardiovasc Diabetol", "BMC Med Genet", "BMC Palliat Care", "BMC Medical Imaging", "Critical Care", "Transplant Res", "Transplant Res", "J Cardiothorac Surg", "Journal of Vision", "Journal of Management and Sustainability", "Trials", "J Cardiothorac Surg", "J Med Case Rep", "J Ovarian Res", "Genome Biol", "J Cardiothorac Surg", "Radiat Oncol", "Journal of Management and Sustainability", "Critical Care", "Front. Psychology", "Radiat Oncol", "BMC Infect Dis", "BMC Ear, Nose and Throat Disorders", "BMC Cancer", "Health and Quality of Life Outcomes", "IJMS", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Genetics", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "EURASIP Journal on Advances in Signal Processing", "Journal of Analytical Sciences, Methods and Instrumentation", "PLoS ONE", "Molecular Medicine", "Physiological Reports", "CSBJ", "Acta Dermato-Venereologica", "Front. Psychology", "Front. Plant Sci.", "Front. Plant Sci.", "Mathematical Problems in Engineering", "Chromatin Remodelling", "New J. Phys.", "Front. Psychology", "Front. Plant Sci.", "International Journal of Dentistry", "Nucleic Acids Research", "Nucleic Acids Research", "Nucleic Acids Research", "PLoS ONE", "Nucleic Acids Research", "Journal of Vision", "Front. Integr. Neurosci.", "Front. Hum. Neurosci.", "Pharmaceuticals", "Surg Neurol Int", "International Journal of Molecular Epidemiology and Genetics", "Functional Foods in Health and Disease", "International Journal of Molecular Epidemiology and Genetics" ],
"source": [ "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Uni Regensburg", "Springer Science + Business Media", "Wiley-Blackwell", "Nature Publishing Group", "IOP Publishing", "PAGEPress Publications", "Oxford University Press (OUP)", "International Union of Crystallography (IUCr)", "International Union of Crystallography (IUCr)", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Association for Research in Vision and Ophthalmology (ARVO)", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "International Scientific Literature", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Wiley-Blackwell", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Walter de Gruyter GmbH", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "MDPI AG", "Baishideng Publishing Group Co., Limited (formerly WJG Press)", "Public Library of Science (PLoS)", "OMICS Publishing Group", "OMICS Publishing Group", "Public Library of Science (PLoS)", "Frontiers Media SA", "MDPI AG", "Pensoft Publishers", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Ivyspring International Publisher", "International Scientific Literature", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Association for Research in Vision and Ophthalmology (ARVO)", "Canadian Center of Science and Education", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Canadian Center of Science and Education", "Springer Science + Business Media", "Frontiers Media SA", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "MDPI AG", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Springer Science + Business Media", "Scientific Research Publishing, Inc,", "Public Library of Science (PLoS)", "The Feinstein Institute for Medical Research (North Shore LIJ Research Institute)", "Wiley-Blackwell", "Elsevier BV", "Society for Publication of Acta Dermato-Venereologica ", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "InTech", "IOP Publishing", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Oxford University Press (OUP)", "Public Library of Science (PLoS)", "Oxford University Press (OUP)", "Association for Research in Vision and Ophthalmology (ARVO)", "Frontiers Media SA", "Frontiers Media SA", "MDPI AG", "Medknow", "e-Century Publ. Corp.", "Food Science Publisher", "e-Century Publ. Corp." ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by University of Regensburg Publication Fund 2012-13",
"id": "chart7c63c3ed967" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>

<h3 id="unibi">Fees paid by Bielefeld University Publication Fund 2012-13</h3>

<div id = 'chart70661c96fc3' class = 'rChart rCharts_d3_sankey'></div>    
    <!--Attribution:
Mike Bostock https://github.com/d3/d3-plugins/tree/master/sankey
Mike Bostock http://bost.ocks.org/mike/sankey/
-->

<script>
(function(){
var params = {
 "dom": "chart70661c96fc3",
"width":    960,
"height":    800,
"data": {
 "value": [   3722,    142,  27409,   1928,   1017,   3151,   1046,  23271,    732,  42902,   4247,    961,   1037,   1724,    142,    900,   1600,    960,    960,    960,    960,    960,   1142,   1142,   1904,   1142,    916,   1143,   1142,    917,   1904,   1142,   1142,   1143,   1142,   1142,   1904,   1142,    388,    462,   1078,   1017,    990,    493,    493,   1175,   1046,    915,    968,    958,    968,   1265,   1109,   2053,   1109,   1232,   1109,   1232,   1232,   1232,   1232,   1069,   1232,   1109,   1109,   1069,   1069,    732,   1370,   1500, 1257.5, 1257.5,   1520,    850,   1490,   1475,   1545,   1480,   1470,   1490,   1565,   1190,   1535,   1545,   1252,   1232,   1228,    948,   1048,   1348,   1236,   1081,   1081,   1296,   1212,   1228,   1216,   1212,   1236,   1296,   1212,   1333,   1457,   1457 ],
"target": [ "Association for Research in Vision and Ophthalmology (ARVO)", "Elsevier BV", "Frontiers Media SA", "Hindawi Publishing Corporation", "Informa UK Limited", "MDPI AG", "Nature Publishing Group", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Wiley-Blackwell", "Journal of Vision", "Journal of Vision", "Journal of Vision", "CSBJ", "Frontiers in Cellular and Infection Microbiology", "Frontiers in Neural Circuits", "Frontiers in Psychology", "Frontiers in Psychology", "Frontiers in Psychology", "Front. Plant Sci.", "Front. Psychology", "Front. Neurorobot.", "Frontiers in Psychology", "Frontiers in Behavioral Neuroscience", "Front. Plant Sci.", "Frontiers in Behavioral Neuroscience", "Front. Hum. Neurosci.", "Frontiers in Psychology", "Frontiers in Psychology", "Front. Hum. Neurosci.", "Frontiers in Behavioral Neuroscience", "Frontiers in Psychology", "Front. Comput. Neurosci.", "Front. Comput. Neurosci.", "Front. Plant Sci.", "Frontiers in Behavioral Neuroscience", "Frontiers in Behavioral Neuroscience", "Anatomy Research International", "Education Research International", "Stem Cells International", "Health Psychology and Behavioral Medicine", "Entropy", "Symmetry", "Symmetry", "Entropy", "Scientific Reports", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS Computational Biology", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "PLoS ONE", "Journal of Intelligent Learning Systems and Applications", "BMC Microbiol", "BMC Genomics", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Bioinformatics", "SpringerPlus", "BMC Public Health", "BMC Structural Biology", "BMC Microbiol", "BMC Genomics", "BMC Public Health", "BMC Microbiol", "Health and Quality of Life Outcomes", "BMC Genomics", "BMC Genomics", "BMC Pregnancy and Childbirth", "BMC Public Health", "BMC Biotechnology", "BMC Public Health", "Journal of NeuroEngineering and Rehabilitation", "Microb Cell Fact", "Biotechnol Biofuels", "BMC Psychol", "BMC Bioinformatics", "BMC Bioinformatics", "BMC Public Health", "BMC Genomics", "BMC Genomics", "Globalization and Health", "BMC Genomics", "BMC Public Health", "BMC Biotechnology", "BMC Genomics", "Ecol Evol", "Ecol Evol", "Ecol Evol" ],
"source": [ "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Uni Bielefeld", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Association for Research in Vision and Ophthalmology (ARVO)", "Elsevier BV", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Frontiers Media SA", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Hindawi Publishing Corporation", "Informa UK Limited", "MDPI AG", "MDPI AG", "MDPI AG", "MDPI AG", "Nature Publishing Group", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Public Library of Science (PLoS)", "Scientific Research Publishing, Inc,", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Springer Science + Business Media", "Wiley-Blackwell", "Wiley-Blackwell", "Wiley-Blackwell" ] 
},
"nodeWidth":     15,
"nodePadding":     10,
"layout":     32,
"unit": "EURO",
"title": "Author fees paid by Bielefeld University Publication Fund 2012-13",
"id": "chart70661c96fc3" 
};

params.units ? units = " " + params.units : units = "";

//hard code these now but eventually make available
var formatNumber = d3.format("0,.0f"),    // zero decimal places
    format = function(d) { return formatNumber(d) + units; },
    color = d3.scale.category20();

if(params.labelFormat){
  formatNumber = d3.format(".2%");
}

var svg = d3.select('#' + params.id).append("svg")
    .attr("width", params.width)
    .attr("height", params.height);
    
var sankey = d3.sankey()
    .nodeWidth(params.nodeWidth)
    .nodePadding(params.nodePadding)
    .layout(params.layout)
    .size([params.width,params.height]);
    
var path = sankey.link();
    
var data = params.data,
    links = [],
    nodes = [];
    
//get all source and target into nodes
//will reduce to unique in the next step
//also get links in object form
data.source.forEach(function (d, i) {
    nodes.push({ "name": data.source[i] });
    nodes.push({ "name": data.target[i] });
    links.push({ "source": data.source[i], "target": data.target[i], "value": +data.value[i] });
}); 

//now get nodes based on links data
//thanks Mike Bostock https://groups.google.com/d/msg/d3-js/pl297cFtIQk/Eso4q_eBu1IJ
//this handy little function returns only the distinct / unique nodes
nodes = d3.keys(d3.nest()
                .key(function (d) { return d.name; })
                .map(nodes));

//it appears d3 with force layout wants a numeric source and target
//so loop through each link replacing the text with its index from node
links.forEach(function (d, i) {
    links[i].source = nodes.indexOf(links[i].source);
    links[i].target = nodes.indexOf(links[i].target);
});

//now loop through each nodes to make nodes an array of objects rather than an array of strings
nodes.forEach(function (d, i) {
    nodes[i] = { "name": d };
});

sankey
  .nodes(nodes)
  .links(links)
  .layout(params.layout);
  
var link = svg.append("g").selectAll(".link")
  .data(links)
.enter().append("path")
  .attr("class", "link")
  .attr("d", path)
  .style("stroke-width", function (d) { return Math.max(1, d.dy); })
  .sort(function (a, b) { return b.dy - a.dy; });

link.append("title")
  .text(function (d) { return d.source.name + " → " + d.target.name + "\n" + format(d.value); });

var node = svg.append("g").selectAll(".node")
  .data(nodes)
.enter().append("g")
  .attr("class", "node")
  .attr("transform", function (d) { return "translate(" + d.x + "," + d.y + ")"; })
.call(d3.behavior.drag()
  .origin(function (d) { return d; })
  .on("dragstart", function () { this.parentNode.appendChild(this); })
  .on("drag", dragmove));

node.append("rect")
  .attr("height", function (d) { return d.dy; })
  .attr("width", sankey.nodeWidth())
  .style("fill", function (d) { return d.color = color(d.name.replace(/ .*/, "")); })
  .style("stroke", function (d) { return d3.rgb(d.color).darker(2); })
.append("title")
  .text(function (d) { return d.name + "\n" + format(d.value); });

node.append("text")
  .attr("x", -6)
  .attr("y", function (d) { return d.dy / 2; })
  .attr("dy", ".35em")
  .attr("text-anchor", "end")
  .attr("transform", null)
  .text(function (d) { return d.name; })
.filter(function (d) { return d.x < params.width / 2; })
  .attr("x", 6 + sankey.nodeWidth())
  .attr("text-anchor", "start");

// the function for moving the nodes
  function dragmove(d) {
    d3.select(this).attr("transform", 
        "translate(" + (
                   d.x = Math.max(0, Math.min(params.width - d.dx, d3.event.x))
                ) + "," + (
                   d.y = Math.max(0, Math.min(params.height - d.dy, d3.event.y))
                ) + ")");
        sankey.relayout();
        link.attr("d", path);
  }
})();
</script>
    
    <script></script> 

<h3>Code</h3>

<p>Sample code to generate sankey plot from Bielefeld University dataset</p>
<pre><code class="r">

require(devtools)
devtools::install_github("rCharts", "ramnathv")
library("rCharts")

unibi <- read.csv("data/unibi12-13.csv", header = TRUE, sep = ",")

#select columns
unibi.sub <- unibi[,c("Publisher", "Journal", "EURO")]

#rename
colnames(unibi.sub) <- c("source", "target", "value")
unibi.sub$value <- as.numeric(unibi.sub$value)

#get affiliation 
tt <- as.data.frame(as.matrix((tapply(unibi.sub$value,unibi.sub$source, sum))))
tt$target <- rownames(tt)
tt$source <- rep("Uni Bielefeld", times = nrow(tt))
colnames(tt) <- c("value", "target", "source")

unibi.sub <- rbind(tt, unibi.sub)


#now we finally have the data in the form we need
sankeyPlot <- rCharts$new()
sankeyPlot$setLib('http://timelyportfolio.github.io/rCharts_d3_sankey')

sankeyPlot$set(
  data = unibi.sub,
  nodeWidth = 15,
  nodePadding = 10,
  layout = 32,
  width = 960,
  height = 800,
  unit = "EURO",
  title= "Author fees paid by Bielefeld University Publication Fund 2012-13"
)
sankeyPlot

</code></pre>

<h2>How to cite?</h2>

<p>Bielefeld University Library archives a remote including version history. To cite:</p>

<p>Deinzer, Gernot; Herb, Ulrich; Lützenkirchen, Frank;
Peil, Vitali; Pieper, Dirk; Tullney, Marco; Jahn, Najko; (2014): <em>Datasets on fee-based Open Access publishing across German Institutions</em>. Bielefeld University. <a href="http://dx.doi.org/10.4119/UNIBI/UB.2014.18">10.4119/UNIBI/UB.2014.18</a></p>


<h2>Contributors</h2>

<p>Gernot Deinzer, Ulrich Herb, Kai Karin Geschuhn, Doris Jaeger, Frank Lützenkirchen, Vitali Peil, Dirk Pieper, Adriana Sikora, Marco Tullney, Najko Jahn</p>

 <h2>License</h2>
 
 <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 Unported License</a>.</p>

 <p>Datasets are made available under the Open Database License: <a href="http://opendatacommons.org/licenses/odbl/1.0/">http://opendatacommons.org/licenses/odbl/1.0/</a>. Any rights in individual contents of the database are licensed under the Database Contents License: <a href="http://opendatacommons.org/licenses/dbcl/1.0/">http://opendatacommons.org/licenses/dbcl/1.0/</a></p>

  </section>

    </div>
    </div> 
    </div> 
  </body>
</html>
